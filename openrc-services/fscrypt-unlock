#!/usr/bin/openrc-run

depend() {
	after local
	before getty
	keyword -shutdown
}

start() {
	DIR='/mnt/strg/ectd'
	if [ ! -e "$DIR" ]; then
		echo "encrypted storage at $DIR does not exist, skipping unlocking..."
		exit 0
	fi
	read -r -p 'Do you want to unlock the encrypted storage? ' ANSWER
	if [ "$ANSWER" = 'y' ]; then
		fscrypt unlock "$DIR"
	else
		exit 0
	fi
}
